{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","PersonLine","name","number","removePerson","onClick","Persons","personsToShow","map","person","Filter","filterText","handleFilterChange","value","onChange","PersonForm","newName","handleNameChange","newNumber","handleNumberChange","addPerson","type","Notification","message","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","ErrorNotification","errorMessage","App","useState","persons","setPersons","setNewName","setNewNumber","setFilterText","notifMessage","setNotifMessage","setErrorMessage","useEffect","personService","initialPersons","length","filter","p","toLowerCase","includes","event","target","preventDefault","personObject","window","confirm","personToUpdate","find","returnedPerson","setTimeout","catch","error","newPerson","concat","console","log","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.035a56e6.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => id)\r\n}\r\n\r\nexport default { getAll, create, update, remove }","import React, { useState, useEffect } from 'react'\r\nimport personService from './services/persons'\r\n\r\nconst PersonLine = ({ name, number, removePerson }) => {\r\n  return(\r\n    <p>\r\n      {name} {number}\r\n      <button onClick={removePerson}>remove</button>\r\n    </p>\r\n  )\r\n  \r\n}\r\n\r\nconst Persons = ({ personsToShow, removePerson }) => {\r\n  return (\r\n    <>\r\n    {personsToShow.map(person => \r\n      <PersonLine key={person.id} name={person.name} number={person.number} removePerson={() => removePerson(person.id)}/>)}\r\n    </>\r\n  )\r\n}\r\n\r\nconst Filter = ({ filterText, handleFilterChange }) => {\r\n  return(\r\n    <div>\r\n      filter shown numbers with\r\n      <input\r\n        value={filterText}\r\n        onChange={handleFilterChange}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst PersonForm = ({ newName, handleNameChange, newNumber, handleNumberChange, addPerson }) => {\r\n  return(\r\n    <form>\r\n      <h2> Add a new number </h2>\r\n      <div>\r\n        name: <input\r\n          value={newName}\r\n          onChange={handleNameChange}\r\n          />\r\n      </div>\r\n      <div>\r\n        number: <input\r\n          value={newNumber}\r\n          onChange={handleNumberChange}\r\n          />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\" onClick={addPerson}>add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  const notificationStyle = {\r\n    color: 'green',\r\n    background: 'lightgrey',\r\n    fontSize: 20,\r\n    borderStyle: 'solid',\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10,\r\n  }\r\n\r\n  return (\r\n    <div style={notificationStyle}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst ErrorNotification = ({ errorMessage }) => {\r\n  if (errorMessage === null) {\r\n    return null\r\n  }\r\n\r\n  const errorNotificationStyle = {\r\n    color: 'red',\r\n    background: 'lightgrey',\r\n    fontSize: 20,\r\n    borderStyle: 'solid',\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10,\r\n  }\r\n\r\n  return (\r\n    <div style={errorNotificationStyle}>\r\n      {errorMessage}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons ] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ filterText, setFilterText ] = useState('')\r\n  const [ notifMessage, setNotifMessage ] = useState(null)\r\n  const [ errorMessage, setErrorMessage ] = useState(null)\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(initialPersons => {\r\n        setPersons(initialPersons)\r\n      })\r\n  }, [])\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n    }\r\n    if (persons.map(person => person.name).includes(personObject.name)){\r\n\r\n      if(window.confirm(`${personObject.name} is already added to the phonebook, replace the number with a new one?`)){\r\n\r\n        const personToUpdate = persons.find(person => person.name === personObject.name)\r\n        \r\n        personService\r\n          .update(personToUpdate.id, { ...personToUpdate, number: newNumber })\r\n          .then(returnedPerson => {\r\n            setNotifMessage(`Updated ${returnedPerson.name}'s number`)\r\n            setPersons(persons.map(person => person.id !== personToUpdate.id ? person : returnedPerson))\r\n            setNewName('')\r\n            setNewNumber('')\r\n            setTimeout(() => {\r\n              setNotifMessage(null)\r\n            }, 5000)\r\n          })\r\n          .catch(error => {\r\n            setErrorMessage(\r\n              `Information of '${personToUpdate.name}' was already removed from server`\r\n            )\r\n            setTimeout(() => {\r\n              setErrorMessage(null)\r\n            }, 5000)\r\n          })\r\n      }\r\n\r\n    } else {\r\n      personService\r\n        .create(personObject)\r\n        .then(newPerson => {\r\n          setPersons(persons.concat(newPerson))\r\n          setNewName('')\r\n          setNewNumber('')\r\n          setNotifMessage(`Added ${newPerson.name}`)\r\n          setTimeout(() => {\r\n            setNotifMessage(null)\r\n          }, 5000)\r\n        })\r\n        .catch(error => {\r\n          const message = error.response.data.error\r\n          console.log(message)\r\n          setErrorMessage(message)\r\n          setTimeout(() => {\r\n            setErrorMessage(null)\r\n          }, 5000)\r\n        })\r\n    }\r\n  }\r\n\r\n  const removePerson = (id) => {\r\n    const name = persons.find(p => p.id === id).name\r\n    if(window.confirm(`Delete ${name}?`)){\r\n      personService\r\n        .remove(id)\r\n        .then(id => {\r\n          setPersons(persons.filter(p => p.id !== id))\r\n          setNotifMessage(`Removed ${name}`)\r\n          setTimeout(() => {\r\n            setNotifMessage(null)\r\n          }, 5000)\r\n        })\r\n    }\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilterChange = (event) => {\r\n    setFilterText(event.target.value)\r\n  }\r\n\r\n  const personsToShow = (filterText.length === 0)\r\n    ? persons\r\n    : persons.filter(p => p.name.toLowerCase().includes(filterText.toLowerCase()))\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={notifMessage} />\r\n      <ErrorNotification errorMessage={errorMessage} />\r\n      <Filter filterText={filterText} handleFilterChange={handleFilterChange} />\r\n      <PersonForm newName={newName} handleNameChange={handleNameChange}\r\n        newNumber={newNumber} handleNumberChange={handleNumberChange}\r\n        addPerson={addPerson} />\r\n      <h3>Numbers</h3>\r\n      <Persons personsToShow={personsToShow} removePerson={removePerson}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import ReactDOM from 'react-dom'\r\nimport App from './App.js'\r\n\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n)\r\n"],"sourceRoot":""}